<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QVM</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles/main.css">
</head>

<body>
  <div class="islamic-pattern"></div>

  <!-- ุงูุตูุญุฉ 1: ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ -->
  <div id="mainMenu" class="page active">
    <div class="container">
      <div class="header">
        <div class="logo-container">
          <h1 class="logo">QVM</h1>
        </div>
        <p class="arabic-subtitle">ุตุงูุน ููุฏูู ุงููุฑุขู ุงููุฑูู</p>
      </div>
      <div class="nav-buttons">
        <div class="nav-btn" onclick="showPage('fullOptions')">
          <div class="nav-btn-content">
            <span class="nav-btn-icon">๐</span>
            <div class="nav-btn-title">ุณูุฑุฉ ูุงููุฉ</div>
            <div class="nav-btn-desc">ุฅูุดุงุก ููุฏูู ูุงูู ููุณูุฑุฉ ูุน ุงูุชูุงูุฉ</div>
          </div>
        </div>
        <div class="nav-btn" onclick="showPage('partOptions')">
          <div class="nav-btn-content">
            <span class="nav-btn-icon">๐</span>
            <div class="nav-btn-title">ุขูุงุช</div>
            <div class="nav-btn-desc">ุฅูุดุงุก ููุฏูู ูุขูุงุช ูุญุฏุฏุฉ ุฃู ูุทุงู ูุนูู</div>
          </div>
        </div>
        <div class="nav-btn" onclick="showPage('gallery')">
          <div class="nav-btn-content">
            <span class="nav-btn-icon">๐ฌ</span>
            <div class="nav-btn-title">ุงููุนุฑุถ</div>
            <div class="nav-btn-desc">ุชุตูุญ ูุฃุฏุฑู ููุงุทุน ุงูููุฏูู ุงูุชู ุฃูุดุฃุช</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุตูุญุฉ 2: ุฎูุงุฑุงุช ุงูุณูุฑุฉ ุงููุงููุฉ -->
  <div id="fullOptions" class="page">
    <button class="back-btn" onclick="showPage('mainMenu')">
      <span>โ</span> ุงูุนูุฏุฉ ุฅูู ุงููุงุฆูุฉ
    </button>
    <div class="container">
      <div class="header">
        <h1 class="logo">ุณูุฑุฉ ูุงููุฉ</h1>
      </div>
      <div class="nav-buttons">
        <div class="nav-btn" onclick="showPage('fullForm')">
          <div class="nav-btn-content">
            <span class="nav-btn-icon">๐๏ธ</span>
            <div class="nav-btn-title">ููุชุจุฉ ุงูุชูุงูุฉ</div>
            <div class="nav-btn-desc">ุงุณุชุฎุฏุงู ููุชุจุฉ ุงูุชูุงูุฉ ุงููุฏูุฌุฉ</div>
          </div>
        </div>
        <div class="nav-btn" onclick="showPage('comingSoon','fullOptions')">
          <div class="nav-btn-content">
            <span class="nav-btn-icon">๐</span>
            <div class="nav-btn-title">ุชูุงูุฉ ูุฎุตุตุฉ</div>
            <div class="nav-btn-desc">ุฑูุน ุชูุงูุชู ุงูุฎุงุตุฉ (ูุฑูุจูุง)</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุตูุญุฉ 3: ุฎูุงุฑุงุช ุงูุขูุงุช -->
  <div id="partOptions" class="page">
    <button class="back-btn" onclick="showPage('mainMenu')">
      <span>โ</span> ุงูุนูุฏุฉ ุฅูู ุงููุงุฆูุฉ
    </button>
    <div class="container">
      <div class="header">
        <h1 class="logo">ุขูุงุช</h1>
        <p class="subtitle">ุฅุนุฏุงุฏุงุช ูุฌููุนุฉ ุงูุขูุงุช</p>
        <p class="arabic-subtitle">Verse Range Settings</p>
      </div>
      <div class="nav-buttons">
        <div class="nav-btn" onclick="showPage('partForm')">
          <div class="nav-btn-content">
            <span class="nav-btn-icon">๐๏ธ</span>
            <div class="nav-btn-title">ููุชุจุฉ ุงูุชูุงูุฉ</div>
            <div class="nav-btn-desc">ุงุณุชุฎุฏุงู ููุชุจุฉ ุงูุชูุงูุฉ ุงููุฏูุฌุฉ</div>
          </div>
        </div>
        <div class="nav-btn" onclick="showPage('comingSoon','partOptions')">
          <div class="nav-btn-content">
            <span class="nav-btn-icon">๐</span>
            <div class="nav-btn-title">ุชูุงูุฉ ูุฎุตุตุฉ</div>
            <div class="nav-btn-desc">ุฑูุน ุชูุงูุชู ุงูุฎุงุตุฉ (ูุฑูุจูุง)</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุตูุญุฉ 4: ูุฑูุจุงู -->
  <div id="comingSoon" class="page">
    <button class="back-btn" onclick="goBack()">
      <span>โ</span> ุฑุฌูุน
    </button>
    <div class="container">
      <div class="coming-soon">
        <div class="coming-soon-text">ูุฑูุจูุง</div>
        <div class="coming-soon-desc">
          ูุญู ูุนูู ุนูู ุชูููู ุฑูุน ูููุงุช ุงูุชูุงูุฉ ุงูุฎุงุตุฉ ุจู. ุณุชุชููุฑ ูุฐู ุงูููุฒุฉ ูู ุงูุชุญุฏูุซ ุงููุงุฏู.
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุตูุญุฉ 5: ูููุฐุฌ ุงูุณูุฑุฉ ุงููุงููุฉ -->
  <div id="fullForm" class="page">
    <button class="back-btn" onclick="showPage('fullOptions')">
      <span>โ</span> ุฑุฌูุน
    </button>
    <div class="container">
      <div class="header">
        <h1 class="logo">ุงูุณูุฑุฉ ุงููุงููุฉ</h1>
        <p class="subtitle">ุฅุนุฏุงุฏุงุช ุงูููุฏูู ููุณูุฑุฉ</p>
      </div>
      <div class="form-container">
        <div class="form-grid">
          <div class="form-section">
            <h3>ุฅุนุฏุงุฏุงุช ุงูููุฏูู</h3>
            <div class="form-group">
              <label for="fontColor">ููู ุงููุต</label>
              <input type="color" id="fontColor" value="#ffffff">
            </div>
            <div class="form-group">
              <label for="fontSize">ุญุฌู ุงูุฎุท</label>
              <input type="range" id="fontSize" min="1" max="72" value="10">
              <span id="fontSizeValue">10px</span>
            </div>
            <div class="form-group">
              <label for="pexelsVideo">ููุฏูู ุฎูููุฉ (Pexels)</label>
              <input type="text" id="pexelsVideo" placeholder="ุฃุฏุฎู ูููุฉ ููุชุงุญูุฉ ุฃู ุฑุงุจุท Pexels">
            </div>
            <div class="form-group">
              <label for="imageLink">ุตูุฑุฉ ุฎูููุฉ</label>
              <input type="text" id="imageLink" placeholder="ุฃุฏุฎู ุฑุงุจุท ุงูุตูุฑุฉ">
            </div>
            <div class="form-group">
              <label for="youtubeLink">ุฎูููุฉ ูู YouTube</label>
              <input type="text" id="youtubeLink" placeholder="ุฃุฏุฎู ุฑุงุจุท YouTube">
            </div>
          </div>
          <div class="form-section">
            <h3>ุฅุนุฏุงุฏุงุช ุงููุฑุขู</h3>
            <div class="form-group">
              <label for="fullSurahNumber">ุงูุณูุฑุฉ</label>
              <select id="fullSurahNumber" class="form-control"></select>
            </div>
            <div class="form-group">
              <label for="fullEdition">ุงููุงุฑุฆ</label>
              <select id="fullEdition" class="form-control"></select>
            </div>
            <div class="checkbox-group">
              <input type="checkbox" id="verticalVideoFull">
              <label for="verticalVideoFull">ููุฏูู ุนููุฏู (9:16)</label>
            </div>
            <button class="action-btn create-btn">ุฅูุดุงุก ุงูููุฏูู</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุตูุญุฉ 6: ูููุฐุฌ ุงูุขูุงุช -->
  <div id="partForm" class="page">
    <button class="back-btn" onclick="showPage('partOptions')">
      <span>โ</span> ุฑุฌูุน
    </button>
    <div class="container">
      <div class="header">
        <h1 class="logo">ุฌุฒุก ูู ุงูุณูุฑุฉ</h1>
        <p class="subtitle">ุฅุนุฏุงุฏุงุช ุงููุฏูู</p>
      </div>
      <div class="form-container">
        <div class="form-grid">
          <div class="form-section">
            <h3>ุฅุนุฏุงุฏุงุช ุงูููุฏูู</h3>
            <div class="form-group">
              <label for="fontColorPart">ููู ุงููุต</label>
              <input type="color" id="fontColorPart" value="#ffffff">
            </div>
            <div class="form-group">
              <label for="fontSizePart">ุญุฌู ุงูุฎุท</label>
              <input type="range" id="fontSizePart" min="1" max="72" value="10">
              <span id="fontSizeValuePart">10px</span>
            </div>
            <div class="form-group">
              <label for="pexelsVideoPart">ููุฏูู ุฎูููุฉ (Pexels)</label>
              <input type="text" id="pexelsVideoPart" placeholder="ุฃุฏุฎู ูููุฉ ููุชุงุญูุฉ ุฃู ุฑุงุจุท Pexels">
            </div>
            <div class="form-group">
              <label for="imageLinkPart">ุตูุฑุฉ ุฎูููุฉ</label>
              <input type="text" id="imageLinkPart" placeholder="ุฃุฏุฎู ุฑุงุจุท ุงูุตูุฑุฉ">
            </div>
            <div class="form-group">
              <label for="youtubeLinkPart">ุฎูููุฉ ูู YouTube</label>
              <input type="text" id="youtubeLinkPart" placeholder="ุฃุฏุฎู ุฑุงุจุท YouTube">
            </div>
          </div>
          <div class="form-section">
            <h3>ุฅุนุฏุงุฏุงุช ุงููุฑุขู</h3>
            <div class="form-group">
              <label for="surahNumber">ุงูุณูุฑุฉ</label>
              <select id="surahNumber" class="form-control"></select>
            </div>
            <div class="arabic-input">
              <div class="arabic-label">ุขูุฉ ุงูุจุฏุงูุฉ</div><input type="text" id="startVerse"
                placeholder="ุฑูู ุขูุฉ ุงูุจุฏุงูุฉ">
            </div>
            <div class="arabic-input">
              <div class="arabic-label">ุขูุฉ ุงูููุงูุฉ</div><input type="text" id="endVerse" placeholder="ุฑูู ุขูุฉ ุงูููุงูุฉ">
            </div>
            <div class="form-group">
              <label for="edition">ุงููุงุฑุฆ</label>
              <select id="edition" class="form-control"></select>
            </div>
            <div class="checkbox-group">
              <input type="checkbox" id="verticalVideoPart">
              <label for="verticalVideoPart">ููุฏูู ุนููุฏู (9:16)</label>
            </div>
            <button class="action-btn create-btn">ุฅูุดุงุก ุงูููุฏูู</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุตูุญุฉ 7: ูุนุงููุฉ ุงูููุฏูู -->
  <div id="videoPreview" class="page">
    <button class="back-btn" onclick="goBack()">
      <span>โ</span> ุฑุฌูุน
    </button>
    <div class="container">
      <div class="header">
        <h1 class="logo">ุงููุนุงููุฉ</h1>
        <p class="subtitle">ููุฏูู ุงููุฑุขู ุงูุฎุงุต ุจู</p>
      </div>
      <div class="preview-container">
        <div class="preview-content">
          <div class="video-frame">
            <video id="previewVideo" controls controlsList="nodownload">
              <source src="" type="video/mp4">
              ูุชุตูุญู ูุง ูุฏุนู ุนูุตุฑ ุงูููุฏูู.
            </video>
          </div>
          <div class="preview-actions">
            <button class="download-btn" onclick="downloadCurrentVideo()">
              <i class="fas fa-download"></i> ุชุญููู ุงูููุฏูู
            </button>
            <button class="share-btn" onclick="shareCurrentVideo()">
              <i class="fas fa-share-alt"></i> ูุดุงุฑูุฉ
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุตูุญุฉ 8: ุงููุนุฑุถ -->
  <div id="gallery" class="page">
    <button class="back-btn" onclick="goBack()">
      <span>โ</span> ุฑุฌูุน
    </button>
    <div class="gallery-grid" id="gallery-grid">
      <!-- ุณุชูุนุฑุถ ููุงุทุนู ููุง -->
    </div>
  </div>

  <script type="module" src="js/main.js"></script>

  <script>
    let previousPage = '';

    window.showPage = function (pageId, from = '') {
      const current = document.querySelector('.page.active');
      if (current && from) previousPage = from;
      else if (current) previousPage = current.id;

      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

      setTimeout(() => document.getElementById(pageId).classList.add('active'), 150);
    };

    window.goBack = function () {
      showPage(previousPage || 'mainMenu');
    };

    document.getElementById('fontSize').addEventListener('input', e => {
      document.getElementById('fontSizeValue').textContent = e.target.value + 'px';
    });
    document.getElementById('fontSizePart').addEventListener('input', e => {
      document.getElementById('fontSizeValuePart').textContent = e.target.value + 'px';
    });

    function downloadCurrentVideo() {
      const videoElement = document.getElementById('previewVideo');
      const fileName = videoElement.getAttribute('data-filename');
      
      if (!fileName) {
        alert('ูุง ููุฌุฏ ููุฏูู ูุชุงุญ ููุชุญููู');
        return;
      }
      
      const downloadUrl = `/videos/${fileName}?download=true`;
      const a = document.createElement('a');
      a.href = downloadUrl;
      a.download = fileName;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
    function shareCurrentVideo() {
      const videoUrl = document.getElementById('previewVideo').src;
      const videoName = document.querySelector('.subtitle').textContent;
      
      // Create share menu
      const shareMenu = `
        <div class="share-modal">
          <div class="share-header">
            <h3>ูุดุงุฑูุฉ ุงูููุฏูู</h3>
            <button class="close-share">&times;</button>
          </div>
          <div class="share-platforms">
            <button class="share-option" data-platform="whatsapp">
              <i class="fab fa-whatsapp"></i> ูุงุชุณุงุจ
            </button>
            <button class="share-option" data-platform="tiktok">
              <i class="fab fa-tiktok"></i> ุชูู ุชูู
            </button>
            <button class="share-option" data-platform="instagram">
              <i class="fab fa-instagram"></i> ุฅูุณุชุบุฑุงู
            </button>
            <button class="share-option" data-platform="youtube">
              <i class="fab fa-youtube"></i> ููุชููุจ
            </button>
            <button class="share-option" data-platform="link">
              <i class="fas fa-link"></i> ูุณุฎ ุงูุฑุงุจุท
            </button>
          </div>
        </div>
      `;
      
      // Add to DOM
      const modalContainer = document.createElement('div');
      modalContainer.id = 'share-modal-container';
      modalContainer.innerHTML = shareMenu;
      document.body.appendChild(modalContainer);
      
      // Add event listeners
      document.querySelectorAll('.share-option').forEach(btn => {
        btn.addEventListener('click', () => {
          const platform = btn.dataset.platform;
          handleShare(platform, videoUrl, videoName);
        });
      });
      
      // Close button
      document.querySelector('.close-share').addEventListener('click', () => {
        document.body.removeChild(modalContainer);
      });
    }

    function handleShare(platform, url, title) {
      const encodedUrl = encodeURIComponent(url);
      const text = encodeURIComponent(`ุดุงูุฏ ูุฐุง ุงูููุฏูู: ${title}`);

      switch(platform) {
        case 'whatsapp':
          window.open(`https://wa.me/?text=${text}%0A${encodedUrl}`, '_blank');
          break;
        case 'tiktok':
          // TikTok doesn't have direct share, use copy instead
          navigator.clipboard.writeText(url);
          alert('ุชู ูุณุฎ ุฑุงุจุท ุงูููุฏูู! ุงูุตูู ูู ุชูู ุชูู');
          break;
        case 'instagram':
          // Instagram doesn't allow direct sharing from web
          alert('ุงูุชุญ ุชุทุจูู ุฅูุณุชุบุฑุงู ูุงูุตู ุงูุฑุงุจุท ูู ูุตุชู');
          navigator.clipboard.writeText(url);
          break;
        case 'youtube':
          window.open(`https://www.youtube.com/share?url=${encodedUrl}`, '_blank');
          break;
        case 'link':
          navigator.clipboard.writeText(url);
          alert('ุชู ูุณุฎ ุฑุงุจุท ุงูููุฏูู: ' + url);
          break;
      }
      
      // Close modal
      document.getElementById('share-modal-container')?.remove();
    }

    document.querySelectorAll('.action-btn, .download-btn, .share-btn').forEach(button => {
      button.addEventListener('click', function (e) {
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        ripple.style.cssText = `
          position: absolute;
          width: ${size}px;
          height: ${size}px;
          left: ${x}px; top: ${y}px;
          border-radius:50%;
          background: rgba(255,255,255,0.4);
          transform: scale(0);
          animation: ripple 0.6s linear;
        `;
        this.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);
      });
    });

    const style = document.createElement('style');
    style.textContent = `
      @keyframes ripple { to { transform: scale(4); opacity: 0; } }
      .action-btn, .download-btn, .share-btn { position: relative; overflow: hidden; }
    `;
    document.head.appendChild(style);
  </script>
</body>

</html>